!function(t){"use strict";var e=0,i=function(e,i){this.options=i,this.$elementFilestyle=[],this.$element=t(e)};i.prototype={clear:function(){this.$element.val(""),this.$elementFilestyle.find(":text").val(""),this.$elementFilestyle.find(".badge").remove()},destroy:function(){this.$element.removeAttr("style").removeData("filestyle"),this.$elementFilestyle.remove()},disabled:function(t){if(!0!==t&&!1!==t)return this.options.disabled;this.options.disabled=t,this.$element.prop("disabled",this.options.disabled),this.$elementFilestyle.find(".filestyle-button").prop("disabled",this.options.disabled),this.options.disabled?this.$elementFilestyle.find(".filestyle-button").css("opacity","0.65"):this.$elementFilestyle.find(".filestyle-button").css("opacity","1")},dragdrop:function(t){if(!0!==t&&!1!==t)return this.options.dragdrop;this.options.dragdrop=t},useLabel:function(t){if(!0!==t&&!1!==t)return this.options.useLabel;this.options.useLabel=t},buttonBefore:function(t){if(!0===t)this.options.buttonBefore||(this.options.buttonBefore=t,this.options.input&&(this.$elementFilestyle.remove(),this.constructor(),this.pushNameFiles()));else{if(!1!==t)return this.options.buttonBefore;this.options.buttonBefore&&(this.options.buttonBefore=t,this.options.input&&(this.$elementFilestyle.remove(),this.constructor(),this.pushNameFiles()))}},input:function(t){if(!0===t)this.options.input||(this.options.input=t,this.options.buttonBefore?this.$elementFilestyle.append(this.htmlInput()):this.$elementFilestyle.prepend(this.htmlInput()),this.pushNameFiles(),this.$elementFilestyle.find(".group-span-filestyle").addClass("input-group-btn"));else{if(!1!==t)return this.options.input;this.options.input&&(this.options.input=t,this.$elementFilestyle.find(":text").remove(),this.$elementFilestyle.find(".group-span-filestyle").removeClass("input-group-btn"))}},size:function(t){if(void 0===t)return this.options.size;this.options.size=t;var e=this.$elementFilestyle.find(".filestyle-button"),i=this.$elementFilestyle.find("input");e.removeClass("btn-lg btn-sm"),i.removeClass("form-control-lg form-control-sm"),"nr"!=this.options.size&&(e.addClass("btn-"+this.options.size),i.addClass("form-control-"+this.options.size))},placeholder:function(t){if(void 0===t)return this.options.placeholder;this.options.placeholder=t,this.$elementFilestyle.find("input").attr("placeholder",t)},text:function(t){if(void 0===t)return this.options.text;this.options.text=t,this.$elementFilestyle.find(".filestyle-button .text").html(this.options.text)},inputTitle:function(t){if(void 0===t)return this.options.inputTitle;this.options.inputTitle=t,this.$elementFilestyle.find("input").attr("title",t)},btnClass:function(t){if(void 0===t)return this.options.btnClass;this.options.btnClass=t,this.$elementFilestyle.find(".filestyle-button").attr({class:"btn "+this.options.btnClass+" btn-"+this.options.size})},inputClass:function(t){if(void 0===t)return this.options.inputClass;this.options.inputClass=t},badge:function(t){if(!0===t){this.options.badge=t;var e=this.pushNameFiles();this.$elementFilestyle.find(".filestyle-button").append(' <span class="badge '+this.options.badgeName+'">'+e.length+"</span>")}else{if(!1!==t)return this.options.badge;this.options.badge=t,this.$elementFilestyle.find(".badge").remove()}},badgeName:function(t){if(void 0===t)return this.options.badgeName;this.options.badgeName=t,this.$elementFilestyle.find(".badge").attr({class:"badge "+this.options.badgeName})},htmlIcon:function(t){return void 0!==t&&(this.options.htmlIcon=t),this.options.htmlIcon},htmlInput:function(){return this.options.input?'<input type="text" class="form-control '+("nr"==this.options.size?"":"form-control-"+this.options.size)+" "+this.options.inputClass+'" placeholder="'+this.options.placeholder+'" title="'+this.options.inputTitle+'" disabled> ':""},pushNameFiles:function(){var t="",e=[];void 0===this.$element[0].files?e[0]={name:this.$element[0]&&this.$element[0].value}:e=this.$element[0].files;for(var i=0;i<e.length;i++)t+=e[i].name.split("\\").pop()+", ";return""!==t?this.$elementFilestyle.find(":text").val(t.replace(/\, $/g,"")):this.$elementFilestyle.find(":text").val(""),e},constructor:function(){var i,n,s=this,l=s.$element.attr("id");""!==l&&l||(l="filestyle-"+e,s.$element.attr({id:l}),e++),n='<span class="group-span-filestyle '+(s.options.input?s.options.buttonBefore?"input-group-prepend":"input-group-append":"")+'">'+(s.options.useLabel?'<label for="'+l+'"':'<button type="button"')+' style="margin-bottom: 0;" class="filestyle-button btn '+s.options.btnClass+" "+("nr"==s.options.size?"":"btn-"+s.options.size)+'" '+(s.options.disabled||s.$element.attr("disabled")?' disabled="true"':"")+">"+s.htmlIcon()+'<span class="buttonText">'+s.options.text+"</span>"+(s.options.useLabel?"</label>":"</button>")+"</span>",i=s.options.buttonBefore?n+'<div name="filedrag"></div>'+s.htmlInput():s.htmlInput()+'<div name="filedrag"></div>'+n,s.$elementFilestyle=t('<div class="bootstrap-filestyle input-group">'+i+"</div>"),s.$elementFilestyle.find(".group-span-filestyle").attr("tabindex","0").keypress((function(t){if(13===t.keyCode||32===t.charCode)return s.$elementFilestyle.find(".filestyle-button").click(),!1})),s.$element.css({position:"absolute",clip:"rect(0px 0px 0px 0px)"}).attr("tabindex","-1").after(s.$elementFilestyle),s.$elementFilestyle.find(s.options.buttonBefore?".filestyle-button":":input").css({"border-top-left-radius":".25rem","border-bottom-left-radius":".25rem","border-top-right-radius":"0","border-bottom-right-radius":"0"}),s.$elementFilestyle.find('[name="filedrag"]').css({position:"absolute",width:"100%",height:s.$elementFilestyle.height()+"px","z-index":-1}),(s.options.disabled||s.$element.attr("disabled"))&&(s.$element.attr("disabled","true"),s.options.disabled?s.$elementFilestyle.find(".filestyle-button").css("opacity","0.65"):s.$elementFilestyle.find(".filestyle-button").css("opacity","1")),s.$element.change((function(){var t=s.pushNameFiles();s.options.badge?0==s.$elementFilestyle.find(".badge").length?s.$elementFilestyle.find(".filestyle-button").append(' <span class="badge '+s.options.badgeName+'">'+t.length+"</span>"):0==t.length?s.$elementFilestyle.find(".badge").remove():s.$elementFilestyle.find(".badge").html(t.length):s.$elementFilestyle.find(".badge").remove(),s.options.onChange(t)})),s.$elementFilestyle.find(".filestyle-button").click((function(){return s.$element.click(),!1})),t(document).on("dragover",(function(e){e.preventDefault(),e.stopPropagation(),s.options.dragdrop&&t('[name="filedrag"]').css("z-index","9")})).on("drop",(function(e){e.preventDefault(),e.stopPropagation(),s.options.dragdrop&&t('[name="filedrag"]').css("z-index","-1")})),s.$elementFilestyle.find('[name="filedrag"]').on("dragover",(function(t){t.preventDefault(),t.stopPropagation()})).on("dragenter",(function(t){t.preventDefault(),t.stopPropagation()})).on("drop",(function(e){if(e.originalEvent.dataTransfer&&!s.options.disabled&&s.options.dragdrop&&e.originalEvent.dataTransfer.files.length){e.preventDefault(),e.stopPropagation(),s.$element[0].files=e.originalEvent.dataTransfer.files;var i=s.pushNameFiles();s.options.badge?0==s.$elementFilestyle.find(".badge").length?s.$elementFilestyle.find(".filestyle-button").append(' <span class="badge '+s.options.badgeName+'">'+i.length+"</span>"):0==i.length?s.$elementFilestyle.find(".badge").remove():s.$elementFilestyle.find(".badge").html(i.length):s.$elementFilestyle.find(".badge").remove(),t('[name="filedrag"]').css("z-index","-1")}}))}};var n=t.fn.filestyle;t.fn.filestyle=function(e,n){var s="",l=this.each((function(){if("file"===t(this).attr("type")){var l=t(this),o=l.data("filestyle"),a=t.extend({},t.fn.filestyle.defaults,e,"object"==typeof e&&e);o||(l.data("filestyle",o=new i(this,a)),o.constructor()),"string"==typeof e&&(s=o[e](n))}}));return void 0!==typeof s?s:l},t.fn.filestyle.defaults={text:"Choose file",htmlIcon:"",btnClass:"btn-secondary",inputClass:"",size:"nr",input:!0,badge:!1,badgeName:"badge-light",buttonBefore:!1,dragdrop:!0,useLabel:!0,disabled:!1,placeholder:"",inputTitle:"",onChange:function(){}},t.fn.filestyle.noConflict=function(){return t.fn.filestyle=n,this},t((function(){t(".filestyle").each((function(){var e=t(this),i={input:"false"!==e.attr("data-input"),htmlIcon:e.attr("data-icon"),buttonBefore:"true"===e.attr("data-buttonBefore"),disabled:"true"===e.attr("data-disabled"),size:e.attr("data-size"),text:e.attr("data-text"),btnClass:e.attr("data-btnClass"),inputClass:e.attr("data-inputClass"),badge:"true"===e.attr("data-badge"),dragdrop:"false"!==e.attr("data-dragdrop"),useLabel:"false"!==e.attr("data-useLabel"),badgeName:e.attr("data-badgeName"),placeholder:e.attr("data-placeholder"),inputTitle:e.attr("data-inputTitle")};e.filestyle(i)}))}))}(window.jQuery);
